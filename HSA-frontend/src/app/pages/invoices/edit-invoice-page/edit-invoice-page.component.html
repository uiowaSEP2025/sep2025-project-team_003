<div class="flex flex-col items-center mt-4">
    <mat-card class="p-5">
        <div>Editing invoice for customer: {{customerName}}</div>
        <div>with issuance date: {{dateIssued}}</div>
        <div>and due date: {{dateDue}}</div>
        <div>and status: {{initialStatus}}</div>
    </mat-card>

  <div class="m-10"></div>
    <app-table-component
      data-testid="invoice-quotes-table"
      [loadDataToTable]="loadQuotesToTable.bind(this)"
      editRedirect=""
      [hideValues]="['Actions', 'Id']"
      [fetchedData]="quotes"
      checkbox="multiple"
      [checkedIds]="selectedQuotes"
      [setCheckedIds]="setSelectedQuotes.bind(this)"
      [hideSearch]="true"
      [headers]="['Description','Customer', 'Job Status', 'Start Date', 'End Date']"
    >
    </app-table-component>
    @if (selectedQuotesIsError) {
      <mat-error class="mt-3">You must select a completed job.</mat-error>
    }

    <mat-form-field class="pt-5">
        <mat-label>Status</mat-label>
        <mat-select data-testid="status-selector" required [(ngModel)]="status">
            <mat-option value="created">created</mat-option>
            <mat-option value="issued">issued</mat-option>
            <mat-option value="paid">paid</mat-option>
        </mat-select>
    </mat-form-field>
    <mat-form-field class="pt-5">
      <mat-label>Payment Link</mat-label>
      <input matInput [(ngModel)]="paymentLink" type="text">

    </mat-form-field>

    <app-invoice-date-picker
      [formControll]="range"
      [dateLabels]="['Issuance date', 'Due date']"
    ></app-invoice-date-picker>

    <mat-form-field class="pt-10">
        <mat-label>Tax rate</mat-label>
        <input matInput [formControl]="taxAmount" [errorStateMatcher]="matcher" type="number" data-testid="tax-input">
        @if (taxAmount.hasError('required')) {
        <mat-error>Tax amount is <strong>required</strong></mat-error>
        }
        @else if (taxAmount.hasError('min') || taxAmount.hasError('max') ) {
            <mat-error class="mb-5">Tax must be between 0-100</mat-error>
        }
        @else if (taxAmount.hasError('notInteger')) {
            <mat-error class="mb-5">Tax must be a whole number</mat-error>
        }
    </mat-form-field>
    <div class="max-w-md pt-3">
        <p class="text-center text-sm text-gray-600">
            <strong>Disclaimer:</strong> You are responsible for understanding and complying with the tax laws of your
            jurisdiction.
            We, the software developers, are not liable for any errors, omissions, or legal consequences resulting from
            your use of this software.
            Always consult a tax professional for guidance.
        </p>
    </div>

    <button mat-raised-button class="mt-10 mb-5" (click)="onSubmit()" data-testid="submit">Submit</button>

</div>
